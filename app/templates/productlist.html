{% extends 'index.html' %}
{% block content %}
<br />
<div id="add-div"></div>
<br />

<button id="add-btn" class="btn btn-success btn-sm" onclick="showaddform()">Add new product</button>

<h1>Products</h1>

{% for s in products %}
<div class="card" style="max-width:50rem">
    <div class="card-body">
        <h4 class="card-title">{{s.productname}}</h4>
        <h5 class="card-title">{{s.supplier.companyname}}</h5>
        <p class="card-text" style="color:green">Price:{{s.price}} | stock: {{s.stock}} </p>
        <a href="/edit-product-get/{{s.id}}" class="btn btn-primary">Edit</a>
        <a href="/confirm-delete-product/{{s.id}}" class="btn btn-danger">Delete</a>
        <a href="/products-by-supplier/{{s.supplier.id}}" class="btn btn-secondary">{{s.supplier.companyname}}'s all Products</a>
    </div>
</div>

{% empty %}
<div class="card" style="max-width:50rem">
    <div class="card-body">
        <p class="card-text">No products found in database</p>
    </div>
</div>

{% endfor %}
<script>

    let x = `
    <h2 style="color:darkorange">Please fill in form</h2>
    <div class="card" style="width:20rem;">
        <div class="card-body">
            <form method="post" action="/add-product/">
                {% csrf_token %}

                <input class="card-text" type="text" placeholder="product name" name="productname">
                <input class="card-text" type="text" placeholder="price" name="price">
                <input class="card-text" type="text" placeholder="stock" name="stock">

                <br/>
                <label for="supplier">Supplier</label>
                <select id="supplier" name="supplier">
                {% for s in suppliers %}
                    <option value= "{{s.id}}">{{s.companyname}}</option>
                {% endfor %}
                </select>

                <br/>
                <input type="submit" value="Confirm" class="btn btn-success btn-sm" name="">
                <input type="submit" id="hide-btn" onclick="hideaddform()" value="Cancel" class="btn btn-secondary btn-sm" name="">

            </form>
        </div>
    </div>

    `
    function showaddform() {
        document.getElementById("add-div").innerHTML = x
    }
    function hideaddform() {
        document.getElementById("add-div").innerHTML = ""
    }

</script>
{% endblock %}
